###################################################################################################
##  NCHDA AA & SP algorithm
##  using nchda_and_fetal_codes_v8.1.xlsx
###################################################################################################
##  2019-08-08 JS (added new 2019-20 codes)
##  2020-02-03 added/amended 5 codes (158038, 120612, 128702, 128711, 130524)
##  2021-01-30 added AVSD diagnosis list for valve repairs (30, 31, 32)
##  2021-02-03 added the lists for fuvh_diagnosis and fuvh_procedure

## 2022-10-03 added the lists of codes into list of valid procedures as below
## Their leading codes are allocated to 'no_qualifying_code' group which need to be reallocated to catheter intervention, 
## bypass, or non-bypass groups. If they have preceding codes in front, the activity category might already be allocated 
## to a valid group hierarchically.



## 	120195. Balloon atrial septostomy
## 	120571. Atrioventricular septal defect (AVSD) repair with direct ventricular component closure & patch to atrial component (Nunn/Wilson)
## 	120665. Intraoperative removal of right ventricular outflow tract stent
## 	120838. Removal of ventricular septal defect (VSD) implanted device
## 	121410. Transection and oversewing of pulmonary trunk
## 	121438. Intraoperative removal of pulmonary arterial stent
## 	121507. Removal of band from right pulmonary artery
## 	121508. Removal of band from left pulmonary artery
## 	121516. Removal of bands from right & left pulmonary arteries
## 	121757. Procedure involving ascending aorta
## 	122323. Myotomy of coronary arterial muscle bridge (unroofing-debridging)
## 	122999. Removal of interatrial communication ('ASD') implanted device
## 	123117. Removal of band-clip from systemic-to-pulmonary arterial shunt
## 	123224. Removal of foreign body from heart
## 	124545. Removal of device from body: surgical
## 	127031. Transluminal occlusion of systemic vein


## all with code type 'procedure'
procedures_valid_nchda <- c(
  "120000", "120002", "120003", "120017", "120020", "120021", "120022", "120023",
  "120024", "120025", "120029", "120030", "120036", "120039", "120042", "120043",
  "120044", "120050", "120055", "120078", "120081", "120083", "120090", "120091",
  "120092", "120100", "120101", "120102", "120103", "120106", "120107", "120108",
  "120110", "120122", "120130", "120131", "120132", "120141", "120142", "120143",
  "120144", "120147", "120153", "120157", "120160", "120180", "120188", "120189",
  "120190", "120198", "120200", "120202", "120204", "120209", "120211", "120222",
  "120270", "120277", "120283", "120286", "120299", "120300", "120301", "120303",
  "120304", "120310", "120311", "120319", "120384", "120397", "120400", "120401",
  "120409", "120418", "120420", "120433", "120440", "120445", "120489", "120490",
  "120501", "120510", "120511", "120600", "120605", "120612", "120618", "120619",
  "120625", "120626", "120635", "120638", "120641", "120643", "120700", "120701",
  "120707", "120711", "120712", "120713", "120719", "120726", "120737", "120738",
  "120801", "120802", "120803", "120806", "120807", "120816", "120819", "120820",
  "120821", "120822", "120828", "120835", "120865", "120901", "120903", "121000",
  "121004", "121005", "121014", "121100", "121134", "121141", "121143", "121201",
  "121208", "121300", "121302", "121305", "121309", "121312", "121315", "121321",
  "121322", "121351", "121355", "121381", "121382", "121384", "121385", "121386",
  "121387", "121401", "121402", "121403", "121405", "121408", "121419", "121420",
  "121421", "121422", "121430", "121431", "121503", "121504", "121505", "121506",
  "121511", "121513", "121514", "121524", "121525", "121548", "121549", "121550",
  "121553", "121570", "121580", "121581", "121600", "121602", "121604", "121605",
  "121611", "121614", "121621", "121622", "121625", "121628", "121629", "121630",
  "121633", "121635", "121640", "121642", "121650", "121659", "121661", "121662",
  "121663", "121664", "121665", "121666", "121667", "121668", "121680", "121681",
  "121685", "121690", "121697", "121711", "121731", "121732", "121777", "121778",
  "121790", "121791", "121799", "121800", "121801", "121802", "121803", "121804",
  "121808", "121810", "121815", "121817", "121822", "121827", "121830", "121848",
  "121870", "122020", "122021", "122022", "122023", "122100", "122200", "122300",
  "122307", "122308", "122309", "122311", "122313", "122330", "122331", "122338",
  "122341", "122342", "122380", "122400", "122404", "122410", "122420", "122421",
  "122422", "122500", "122502", "122507", "122518", "122519", "122562", "122565",
  "122567", "122572", "122587", "122588", "122601", "122613", "122620", "122621",
  "122701", "122702", "122745", "122746", "122750", "122778", "122801", "122811",
  "122821", "122822", "122901", "122902", "122911", "122920", "122921", "122925",
  "122926", "122940", "122952", "122979", "123001", "123005", "123006", "123013",
  "123020", "123021", "123027", "123028", "123031", "123032", "123034", "123037",
  "123041", "123050", "123051", "123054", "123056", "123060", "123074", "123092",
  "123093", "123103", "123104", "123105", "123106", "123111", "123115", "123119",
  "123130", "123131", "123134", "123142", "123144", "123145", "123146", "123172",
  "123200", "123203", "123206", "123209", "123210", "123213", "123214", "123217",
  "123218", "123220", "123221", "123222", "123228", "123229", "123240", "123241",
  "123243", "123246", "123253", "123259", "123270", "123280", "123283", "123290",
  "123310", "123351", "123352", "123353", "123360", "123450", "123451", "123452",
  "123460", "123463", "123464", "123467", "123468", "123470", "123473", "123484",
  "123485", "123513", "123514", "123540", "123546", "123548", "123553", "123557",
  "123560", "123572", "123580", "123581", "123582", "123583", "123584", "123600",
  "123601", "123602", "123610", "123614", "123623", "123635", "123636", "123637",
  "123640", "123645", "123646", "123701", "123702", "123703", "123704", "123706",
  "123713", "123720", "123760", "123770", "123825", "123840", "123850", "123869",
  "124000", "124006", "124013", "124015", "124016", "124029", "124030", "124099",
  "124130", "124136", "124231", "124232", "124233", "124234", "124235", "124239",
  "124261", "124264", "124265", "124279", "124300", "124306", "124307", "124325",
  "124370", "124475", "124500", "124501", "124504", "124506", "124507", "124510",
  "124511", "124512", "124513", "124514", "124515", "124519", "124521", "124528",
  "124530", "124558", "124559", "124570", "124571", "124573", "124575", "124576",
  "124590", "124591", "124600", "124801", "124802", "126400", "126408", "126420",
  "126421", "126440", "126505", "126506", "126513", "126514", "126523", "126545",
  "126548", "126556", "126560", "126572", "126582", "126589", "126600", "126601",
  "126602", "126605", "126606", "126607", "127008", "127044", "127045", "128000",
  "128001", "128010", "128037", "128038", "128074", "128075", "128701", "128702",
  "128704", "128710", "128721", "128722", "128723", "128724", "128725", "128726",
  "128727", "128728", "128731", "128736", "128737", "128741", "128745", "128753",
  "129001", "130014", "130015", "130103", "130123", "130124", "130501", "130505",
  "130506", "130507", "130508", "130512", "130513", "130514", "130515", "130516",
  "130517", "130524", "130536", "155040", "Q50811", "Q50813", "Q58530",
  ##  added
  "127031","120195","122323","123117","122999","121438","120665","120838","124545",
  "123224","121507","121508","121516","121757","121410","120571"

)



## from the 'previous_procedure' column
previous_procedures_valid_nchda <- c(
  "120828", "120835", "120865", "120901", "120903", "121000", "121004", "121005",
  "121014", "121100", "121134", "121141", "121143", "121201", "121208", "121300",
  "121302", "121305", "121309", "121312", "121315", "121321", "121322", "121351",
  "121355", "121381", "121382", "121384", "121385", "121386", "121387", "121401",
  "121402", "121403", "121405", "121408", "121419", "121420", "121421", "121422",
  "121430", "121431", "121503", "121504", "121505", "121506", "121511", "121513",
  "121514", "121524", "121525", "121548", "121549", "121550", "121553", "121570",
  "121580", "121581", "121600", "121602", "121604", "121605", "121611", "121614",
  "121621", "121622", "121625", "121628", "121629", "121630", "121633", "121635",
  "121640", "121642", "121650", "121659", "121661", "121662", "121663", "121664",
  "121665", "121666", "121667", "121668", "121680", "121681", "121685", "121690",
  "121697", "121711", "121731", "121732", "121777", "121778", "121790", "121791",
  "121799", "121800", "121801", "121802", "121803", "121804", "121808", "121810",
  "121815", "121817", "121822", "121827", "121830", "121848", "121870", "122020",
  "122021", "122022", "122023", "122100", "122200", "122300", "122307", "122308",
  "122309", "122311", "122313", "122330", "122331", "122338", "122342", "122380",
  "122400", "122404", "122410", "122420", "122421", "122422", "122500", "122502",
  "122507", "122518", "122519", "122562", "122565", "122567", "122572", "122587",
  "122588", "122601", "122613", "122620", "122621", "122701", "122702", "122745",
  "122746", "122750", "122778", "122801", "122811", "122821", "122822", "122901",
  "122902", "122911", "122920", "122921", "122925", "122926", "122940", "122952",
  "122979", "123001", "123005", "123006", "123013", "123020", "123021", "123027",
  "123028", "123031", "123032", "123034", "123037", "123041", "123050", "123051",
  "123054", "123056", "123060", "123074", "123092", "123093", "123103", "123104",
  "123105", "123106", "123111", "123115", "123119", "123130", "123131", "123134",
  "123142", "123144", "123145", "123146", "123172", "123200", "123203", "123206",
  "123209", "123210", "123213", "123217", "123220", "123222", "123228", "123229",
  "123246", "123270", "123310", "123360", "123450", "123451", "123452", "123463",
  "123464", "123467", "123468", "123470", "123473", "123484", "123485", "123513",
  "123514", "123540", "123546", "123548", "123553", "123557", "123560", "123572",
  "123580", "123581", "123582", "123583", "123584", "123600", "123601", "123602",
  "123610", "123614", "123623", "123635", "123636", "123637", "123640", "123645",
  "123646", "123701", "123702", "123703", "123704", "123706", "123713", "123720",
  "123760", "123825", "123840", "123850", "123869", "124130", "124136", "124231",
  "124232", "124233", "124234", "124235", "124239", "124261", "124264", "124265",
  "124279", "124370", "124475", "124500", "124504", "124510", "124511", "124512",
  "124513", "124514", "124515", "124519", "124521", "124528", "124530", "124558",
  "124559", "124570", "124571", "124573", "124575", "124576", "124600", "124801",
  "124802", "126420", "126421", "126440", "126513", "126514", "126523", "126572",
  "126582", "126589", "126600", "126601", "126602", "126605", "126606", "126607",
  "127008", "127044", "127045", "128000", "128074", "128075", "128721", "128722",
  "128723", "128724", "128725", "128726", "128727", "128728", "128731", "128736",
  "128737", "129001", "155040",
  ##  added
  "127031","120195","122323","123117","122999","121438","120665","120838","124545",
  "123224","121507","121508","121516","121757","121410","120571"
)



## from the 'exclude' column
procedures_exclude_non_nchda <- c(
  "120090", "120091", "120092", "123270", "124000", "124006", "124013", "124015",
  "124016", "124029", "124030", "124099", "124300", "124306", "124307", "124325",
  "124501", "124506", "124590", "124591", "128001", "128010", "128037", "128038",
  "130103", "130514", "130515", "130516", "130524", "Q50811", "Q50813", "Q58530"
)



## the old excluded list (pre v6 of the dataset)
## removed 123270 - 2019-08-30
minor_and_excluded_algorithm <- c(
  "123200", "123206", "123214", "123217", "123218", "123221", "123228", "123229",
  "123240", "123241", "123243", "123246", "123253", "123259", "123280", "123283",
  "123290", "123351", "123352", "123353", "124000", "124006", "124013", "124029",
  "124030", "124099", "124300", "124325", "126400", "126408", "126420", "126421",
  "126440", "126505", "126506", "126513", "126514", "126523", "126545", "126548",
  "126556", "126560", "126572", "126582", "126589", "126600", "126601", "126602",
  "126605", "126606", "126607", "128000", "128701", "128728", "128736", "128737",
  "128745", "128753", "130014", "130015", "130100", "130102", "130103", "130104"
)



## all with code type 'diagnosis'
diagnosis_valid_nchda <- c(
  "010100", "010101", "010102", "010103", "010104", "010106", "010107", "010109",
  "010110", "010114", "010116", "010117", "010118", "010119", "010120", "010122",
  "010124", "010125", "010126", "010133", "010139", "010140", "010157", "010159",
  "010160", "010161", "010300", "010306", "010309", "010310", "010400", "010401",
  "010403", "010404", "010405", "010500", "010501", "010503", "010510", "020101",
  "020102", "020103", "020104", "020109", "020301", "020302", "020303", "020305",
  "020400", "020412", "020612", "020704", "030102", "030103", "030104", "030105",
  "030109", "030113", "030209", "030214", "030223", "030305", "030603", "030703",
  "030704", "040006", "040007", "040100", "040101", "040102", "040105", "040109",
  "040125", "040200", "040213", "040300", "040308", "040310", "040400", "040405",
  "040413", "040414", "040500", "040600", "040701", "040800", "040802", "040804",
  "040805", "040806", "040807", "040810", "040820", "040830", "040831", "040891",
  "050100", "050106", "050112", "050113", "050121", "050200", "050201", "050202",
  "050204", "050211", "050300", "050301", "050303", "050310", "050401", "050402",
  "050403", "050500", "050503", "050601", "050602", "050603", "050604", "050701",
  "060100", "060101", "060102", "060103", "060104", "060105", "060107", "060109",
  "060111", "060125", "060126", "060134", "060191", "060192", "060200", "060201",
  "060202", "060203", "060204", "060205", "060207", "060209", "060211", "060212",
  "060213", "060221", "060222", "060225", "060226", "060235", "060236", "060256",
  "060272", "060291", "060292", "060293", "060311", "060411", "060501", "060506",
  "060514", "060525", "060560", "060571", "060572", "060598", "060600", "060601",
  "060608", "060609", "060610", "060705", "060706", "060726", "060727", "060728",
  "060731", "060736", "060737", "060738", "070001", "070003", "070100", "070106",
  "070107", "070110", "070111", "070113", "070114", "070200", "070301", "070501",
  "070520", "070530", "070532", "070600", "070607", "070610", "070612", "070613",
  "070619", "070700", "070841", "070842", "070850", "070900", "070901", "070903",
  "070908", "070916", "070928", "070931", "070934", "070950", "071000", "071001",
  "071002", "071004", "071012", "071017", "071018", "071019", "071101", "071102",
  "071103", "071104", "071105", "071106", "071107", "071112", "071115", "071116",
  "071200", "071201", "071202", "071203", "071205", "071206", "071207", "071208",
  "071209", "071212", "071213", "071402", "071405", "071406", "071407", "071501",
  "071504", "071505", "071601", "072000", "072001", "072004", "072100", "090101",
  "090111", "090112", "090114", "090115", "090118", "090119", "090200", "090201",
  "090203", "090218", "090219", "090401", "090407", "090428", "090429", "090500",
  "090501", "090504", "090505", "090511", "090512", "090515", "090516", "090522",
  "090524", "090525", "090529", "090532", "090591", "090592", "090700", "090705",
  "090711", "090713", "090715", "090716", "090719", "090720", "090726", "090801",
  "090818", "090902", "090903", "090904", "090905", "090906", "090908", "090911",
  "091000", "091001", "091006", "091007", "091010", "091011", "091025", "091026",
  "091027", "091028", "091029", "091030", "091036", "091037", "091038", "091041",
  "091044", "091071", "091072", "091073", "091075", "091077", "091500", "091501",
  "091503", "091506", "091507", "091509", "091512", "091513", "091517", "091519",
  "091521", "091522", "091530", "091591", "091592", "091600", "091602", "091605",
  "091606", "091609", "091610", "091613", "091618", "091619", "091701", "091702",
  "091801", "091803", "091901", "091905", "092020", "092025", "092700", "092705",
  "092721", "092800", "092806", "092809", "092810", "092815", "092816", "092822",
  "092847", "092901", "092911", "092916", "092931", "092932", "092933", "092934",
  "092944", "093000", "093002", "093004", "093016", "093017", "093023", "093100",
  "093134", "093135", "093140", "094101", "094103", "094200", "094220", "094221",
  "094304", "094305", "094312", "094313", "094318", "094405", "094419", "094501",
  "094510", "094511", "094516", "094522", "094600", "094601", "094603", "094606",
  "094614", "094621", "094626", "100100", "100101", "100102", "100103", "100105",
  "100301", "100501", "100521", "100530", "100531", "100533", "100600", "100601",
  "100608", "100609", "100610", "100611", "100612", "100613", "100614", "100618",
  "100620", "100641", "100664", "100665", "100666", "100688", "100689", "100690",
  "100701", "100703", "100704", "100705", "100707", "100708", "100709", "100710",
  "100728", "100740", "100742", "100745", "100751", "100755", "100761", "100771",
  "100779", "100781", "100790", "100800", "100801", "100803", "100804", "100809",
  "100811", "100813", "100815", "100829", "100831", "100901", "100902", "100908",
  "100910", "100930", "100953", "100976", "101001", "101010", "101011", "101012",
  "101013", "101020", "101025", "101030", "101031", "101032", "101034", "101035",
  "101046", "101048", "101049", "101070", "101071", "101072", "101074", "101083",
  "101088", "101089", "101093", "101094", "101095", "101099", "101130", "101131",
  "101132", "101133", "101140", "101141", "101142", "101143", "101144", "101145",
  "101146", "101147", "101148", "101149", "101151", "101153", "101154", "101156",
  "101160", "101165", "101201", "101239", "101242", "101251", "101272", "101301",
  "101302", "101306", "101308", "101320", "101321", "101350", "101351", "101359",
  "101362", "101363", "101364", "101365", "101368", "101369", "101375", "101377",
  "101378", "101400", "101401", "101402", "101404", "101440", "101442", "101443",
  "101444", "101445", "101446", "101450", "101451", "101452", "101453", "101454",
  "101460", "101470", "101472", "101474", "101477", "101480", "101482", "101495",
  "101500", "101501", "101505", "101510", "101512", "101600", "101602", "101608",
  "101616", "101622", "101623", "101640", "101642", "101646", "101647", "101653",
  "101660", "101662", "101663", "101676", "101677", "101681", "101682", "101683",
  "101686", "101688", "101700", "101703", "101705", "101709", "101712", "101713",
  "101723", "101733", "101740", "101746", "101750", "101800", "101801", "101824",
  "101826", "101827", "101848", "101852", "101901", "101902", "101911", "102000",
  "102002", "102003", "102005", "102006", "102007", "102008", "102009", "102012",
  "102013", "102014", "102015", "102016", "102017", "102018", "102019", "102031",
  "102032", "102033", "102034", "102037", "102038", "102039", "102045", "102046",
  "102202", "102203", "102205", "102206", "102207", "102300", "102301", "102302",
  "102303", "102304", "102305", "102311", "102313", "102314", "102400", "102412",
  "103000", "103009", "103016", "103030", "103101", "103103", "103104", "103105",
  "103121", "103123", "103124", "103125", "103200", "103201", "103300", "103301",
  "103302", "103303", "103304", "103306", "103412", "103413", "103414", "103444",
  "103452", "103453", "103454", "103455", "103456", "103457", "103458", "103459",
  "103460", "103501", "103502", "103503", "103504", "103601", "103602", "103603",
  "103604", "103606", "103701", "103702", "103704", "104001", "104030", "105101",
  "107740", "109001", "109024", "109041", "109042", "110000", "110011", "110021",
  "110100", "110101", "110203", "110204", "110207", "110215", "110305", "110307",
  "110308", "110312", "110313", "110315", "110321", "110366", "110367", "110400",
  "110407", "110411", "110412", "110442", "110500", "110506", "110509", "110510",
  "110517", "110521", "110544", "110550", "110556", "110557", "110584", "110600",
  "110601", "110602", "110603", "110607", "110610", "110616", "110617", "110623",
  "110624", "110632", "110633", "110635", "110701", "110706", "110711", "110714",
  "110722", "110723", "110726", "110728", "110729", "111100", "111101", "111103",
  "111117", "111121", "111140", "111159", "111160", "111180", "111200", "111201",
  "111229", "112000", "112300", "123331", "123333", "123334", "123370", "128702",
  "128711", "130001", "130002", "130010", "130011", "130013", "130016", "130017",
  "130021", "130023", "130024", "130025", "130027", "130031", "130032", "130033",
  "130034", "130035", "130036", "130050", "130071", "130100", "130101", "130102",
  "130103", "130104", "130125", "130126", "130127", "130189", "130190", "140101",
  "140102", "140103", "140104", "140105", "140121", "140200", "140206", "140210",
  "140217", "140219", "140221", "140228", "140230", "140232", "140234", "140258",
  "140262", "140266", "140300", "140304", "140305", "140306", "140307", "140308",
  "140309", "140310", "140311", "140321", "140323", "140328", "140329", "140333",
  "140340", "140342", "140344", "140347", "140349", "140352", "140359", "140372",
  "140375", "140390", "140391", "140392", "140397", "140404", "140405", "140412",
  "140414", "140446", "140447", "140450", "140452", "140470", "140485", "140490",
  "140494", "140495", "140496", "140500", "140501", "140540", "140541", "140550",
  "140565", "140601", "141000", "141001", "141002", "141006", "141007", "141008",
  "141011", "141012", "141018", "141025", "141026", "141027", "141028", "141034",
  "141035", "141036", "141037", "141038", "141045", "141052", "141053", "141060",
  "141072", "141073", "141090", "141091", "141095", "141098", "141099", "141140",
  "141141", "141142", "141143", "141144", "141180", "141181", "141187", "141220",
  "141352", "150001", "150002", "150003", "150005", "150009", "150030", "150200",
  "150203", "150207", "150265", "150300", "150303", "150308", "150315", "150321",
  "150330", "150332", "150350", "150351", "150352", "150401", "150405", "150411",
  "150412", "150415", "150434", "150501", "150503", "150526", "151001", "151002",
  "151010", "151011", "151013", "151017", "151019", "151020", "151021", "151027",
  "151028", "151061", "151063", "151066", "151072", "151079", "151100", "151103",
  "151108", "151200", "151201", "151203", "151209", "151302", "151308", "151400",
  "151411", "151500", "151511", "151600", "151602", "152001", "152021", "152023",
  "152024", "152025", "152033", "152034", "152075", "152076", "152101", "152121",
  "152122", "152123", "152132", "152133", "152200", "152202", "152213", "152231",
  "152235", "152400", "152420", "152503", "152511", "152512", "152513", "152531",
  "153000", "153001", "153003", "153008", "153009", "153010", "153018", "153201",
  "153202", "153221", "153222", "153223", "153241", "153242", "153243", "153256",
  "153500", "153501", "153503", "153508", "153509", "153510", "153517", "153601",
  "153626", "153701", "153705", "153707", "153715", "153773", "153780", "153783",
  "153784", "153901", "153902", "153905", "153907", "153950", "154100", "154113",
  "154139", "155000", "155001", "155003", "155011", "155019", "155020", "155030",
  "155037", "155040", "155052", "155060", "155061", "155065", "155070", "155071",
  "155078", "155080", "155081", "155083", "155086", "155091", "155100", "155136",
  "155147", "155150", "155151", "155152", "155153", "155154", "155500", "155516",
  "155524", "155600", "155601", "155602", "155621", "155626", "155627", "155702",
  "155703", "155721", "155801", "155900", "156002", "156020", "156738", "156741",
  "157700", "158000", "158001", "158005", "158006", "158015", "158016", "158019",
  "158020", "158021", "158022", "158029", "158031", "158032", "158033", "158038",
  "158050", "158051", "158052", "158055", "158056", "158061", "158062", "158064",
  "158065", "158070", "158086", "158087", "158090", "158093", "158094", "158101",
  "158190", "158200", "158206", "158207", "158210", "158213", "158221", "158223",
  "158228", "158229", "158230", "158232", "158233", "158238", "158243", "158247",
  "158249", "158250", "158251", "158253", "158257", "158264", "158266", "158267",
  "158268", "158281", "158300", "158375", "158800", "159001", "159003", "159014",
  "159020", "159060", "159062", "159078", "159085", "159086", "159094", "159095",
  "159500", "159503", "159564", "159566", "160101", "160104", "160107", "160111",
  "160121", "160122", "160200", "160301", "160302", "160305", "160321", "160511",
  "160512", "160513", "160800", "160900", "161001", "161009", "161208", "161300",
  "161320", "161509", "162001", "162002", "162010", "163001", "164033", "164034",
  "164035", "164051", "164052", "164053", "165020", "170001", "171002", "Q19051",
  "Q19067", "Q19180", "Q19181", "Q19182"
)



## using the 'diagnosis' group and 'exclude' column
diagnosis_exclude_non_nchda <- c(
  "101700", "101703", "101705", "101709", "101712", "101713", "102300", "103030",
  "123331", "123333", "123334", "123370", "128702", "128711", "130001", "130002",
  "130010", "130011", "130013", "130016", "130017", "130021", "130023", "130024",
  "130025", "130027", "130031", "130032", "130033", "130034", "130035", "130036",
  "130050", "130071", "130100", "130101", "130102", "130104", "130125", "130126",
  "130127", "130189", "130190", "141000", "141001", "141002", "141006", "141007",
  "141008", "141011", "141012", "141018", "141025", "141026", "141027", "141028",
  "141035", "141036", "141037", "141038", "141045", "141052", "141053", "141060",
  "141072", "141073", "141090", "141091", "141095", "141098", "141099", "141140",
  "141141", "141142", "141143", "141144", "141180", "141181", "141187", "141220",
  "141352", "150001", "150002", "150003", "150005", "150009", "150030", "150200",
  "150203", "150207", "150265", "150300", "150303", "150308", "150315", "150330",
  "150332", "150350", "150351", "150415", "155001", "155011", "155019", "155030",
  "155080", "155081", "155083", "155086", "155091", "155150", "155151", "155152",
  "155702", "155703", "155721", "155801", "155900", "156002", "156738", "157700",
  "158000", "158001", "158005", "158006", "158015", "158016", "158019", "158020",
  "158021", "158022", "158029", "158031", "158032", "158033", "158050", "158051",
  "158052", "158055", "158056", "158061", "158062", "158064", "158065", "158070",
  "158086", "158087", "158094", "158200", "158206", "158207", "158213", "158221",
  "158223", "158228", "158229", "158230", "158232", "158233", "158238", "158243",
  "158247", "158249", "158250", "158251", "158253", "158257", "158264", "158266",
  "158267", "158268", "158281", "158375", "158800", "159001", "159003", "159014",
  "159020", "159085", "159086", "170001", "171002", "Q19051", "Q19067"
)



## using the 'comorbidity' column
comorbidity_valid_nchda <- c(
  "030209", "030214", "030305", "030603", "030703", "030704", "070111", "070610",
  "100665", "101239", "101320", "101321", "101363", "101364", "101365", "101400",
  "101500", "101505", "101512", "101723", "101848", "102000", "102002", "102003",
  "102005", "102006", "102007", "102008", "102009", "102012", "102013", "102014",
  "102015", "102016", "102017", "102018", "102019", "102031", "102032", "102033",
  "102034", "102037", "102038", "102039", "102045", "102046", "102202", "102205",
  "102206", "102207", "110635", "140101", "140102", "140103", "140104", "140105",
  "140121", "140200", "140206", "140210", "140217", "140219", "140221", "140228",
  "140230", "140232", "140234", "140258", "140262", "140266", "140300", "140304",
  "140305", "140306", "140307", "140308", "140309", "140310", "140311", "140321",
  "140323", "140328", "140329", "140333", "140340", "140342", "140347", "140349",
  "140352", "140359", "140372", "140375", "140390", "140391", "140392", "140409",
  "140412", "140470", "140485", "140490", "140494", "140495", "140496", "140500",
  "140501", "140540", "140550", "140565", "140601", "141034", "158101", "158210",
  "160302", "160310", "160305", "160800", "160900", "161320", "163001"
)



###################################################################################################
## AA/SP lists
## surgical - vad
vad <- c("123704", "128721", "128722", "128723", "128724", "128741")


## surgical - ecmo
primary_ecmo_include <- c("128725", "128726", "128727")


## catheter - icd
icd <- c(
  "124231", "124233", "124234", "124235", "124239", "124261", "124264", "124265",
  "124279"
)


## catheter - pacemaker
pacemaker <- c(
  "123450", "123451", "123452", "123460", "123463", "123464", "123467", "123468",
  "123470", "123473", "123484", "123485", "123513", "123514", "124370", "124475"
)


## catheter - ep
ep <- c(
  "123546", "123548", "123557", "123582", "123583", "123584", "123840", "123869",
  "130512", "130517"
)


## catheter - diagnostic
diagnostic <- c(
  "120625", "122341", "124501", "124507", "130024", "130124", "130127", "130501", "130505", "130506", "130507",
  "130508", "130513", "130536"
)


###################################################################################################
## AVSD diagnostic list (for valve repairs 30, 31, 32)
## 010120. Atrioventricular septal defect and tetralogy of Fallot
## 060501. Atypical atrioventricular valve in atrioventricular septal defect (AVSD)
## 060506. Atrioventricular septal defect (AVSD) atrioventricular valvar regurgitation
## 060514. Atypical common atrioventricular valve
## 060600. Atrioventricular septal defect (AVSD)
## 060601. Atrioventricular septal defect with communication at the atrial level only (primum atrial septal defect) (partial atrioventricular canal defect)
## 060608. Atrioventricular septal defect with communication at the ventricular level only (atrioventricular canal defect with isolated ventricular communication)
## 060609. Atrioventricular septal defect (atrioventricular canal defect) with communication at atrial level and unrestrictive communication at ventricular level (Complete atrioventricular septal defect)
## 060610. Atrioventricular septal defect (atrioventricular canal defect) with communication at atrial level and restrictive communication at ventricular level (intermediate atrioventricular septal defect)
## 060705. Atrioventricular septal defect (AVSD) with ventricular imbalance with dominant right ventricle, hypoplastic left ventricle
## 060706. Atrioventricular septal defect (AVSD) with ventricular imbalance with dominant left ventricle, hypoplastic right ventricle
## 060726. Atrioventricular septal defect (AVSD) with ventricular imbalance
## 060727. Atrioventricular septal defect (AVSD) with balanced ventricles
## 060728. Common atrioventricular junction with spontaneous fibrous closure of atrioventricular septal defect (AVSD)
## 060731. AVSD with separate AV orifices
## 060736. Common atrioventricular valve with unbalanced commitment of valve to ventricles
## 060737. Common atrioventricular valve with unbalanced commitment of valve to right ventricle
## 060738. Common atrioventricular valve with unbalanced commitment of valve to left ventricle

avsd_diagnosis <- c(
  "010120", "060501", "060506", " 060514", "060600", "060601", "060608", "060609",
  "060610", "060705", "060706", "060726", "060727", "060728", "060731", "060736",
  "060737", "060738"
)


###################################################################################################
## 010109. Hypoplastic left heart syndrome
## 010114. Double inlet atrioventricular connection (double inlet ventricle)
## 010122. Functionally univentricular heart
## 010124. Double outlet right ventricle with intact ventricular septum
## 010403. Double inlet right ventricle
## 010404. Double inlet left ventricle
## 010405. Double inlet to solitary ventricle of indeterminate morphology
## 020305. Solitary ventricle of indeterminate morphology
## 060101. Tricuspid atresia
## 060102. Tricuspid atresia with imperforate tricuspid valve
## 060126. Tricuspid atresia with absent valvar annulus (connection-junction)
## 060201. Mitral atresia
## 060202. Mitral atresia with imperforate mitral valve
## 060226. Mitral atresia with absent valvar annulus (connection-junction)
## 060705. Atrioventricular septal defect (AVSD) with ventricular imbalance with dominant right ventricle, hypoplastic left ventricle
## 060706. Atrioventricular septal defect (AVSD) with ventricular imbalance with dominant left ventricle, hypoplastic right ventricle
## 060726. Atrioventricular septal defect (AVSD) with ventricular imbalance
## 070841. Ventricular imbalance: dominant left ventricle + hypoplastic right ventricle
## 070842. Ventricular imbalance: dominant right ventricle + hypoplastic left ventricle

fuvh_diagnosis <- c(
  "010109", "010114", "010122", "010124", "010403", "010404", "010405", "020305",
  "060101", "060102", "060126", "060201", "060202", "060226", "060705", "060706",
  "060726", "070841", "070842"
)


## 121000. Norwood type procedure
## 121004. Hybrid approach 'Stage 1': application of bilateral pulmonary arterial bands & transcatheter placement of stent in arterial duct
## 122020. Hypoplastic left heart syndrome hybrid approach (transcatheter & surgery): stage 1
## 122021. Hypoplastic left heart syndrome hybrid strategy (transcatheter & surgery)
## 122022. Hypoplastic left heart syndrome hybrid approach (transcatheter & surgery) 'stage 2': aortopulmonary amalgamation + superior cavopulmonary anastomosis(es) + debanding of pulmonary arteries
## 122023. Hypoplastic left heart syndrome hybrid approach (transcatheter & surgery) 'stage 2': aortopulmonary amalgamation + superior cavopulmonary anastomosis(es) + debanding of pulmonary arteries + arch repair
## 123001. Fontan type procedure
## 123005. Total cavopulmonary connection (TCPC) using extracardiac inferior caval vein (IVC)-pulmonary artery conduit with fenestration
## 123006. Total cavopulmonary connection (TCPC) with fenestrated lateral atrial tunnel
## 123013. Fontan procedure with atrioventricular connection
## 123027. Fenestration of Fontan type connection
## 123028. Fontan-type connection without fenestration
## 123031. Takedown of Fontan type procedure
## 123032. Fontan procedure with direct atriopulmonary anastomosis
## 123034. Conversion of Fontan repair to total cavopulmonary connection
## 123037. Fontan type procedure revision or conversion
## 123050. Total cavopulmonary connection (TCPC)
## 123051. Total cavopulmonary conn (TCPC) with lateral atrial tunnel
## 123054. Total cavopulmonary connection (TCPC) using extracardiac inferior caval vein (IVC)-pulmonary artery conduit
## 123056. Takedown of total cavopulmonary connection (TCPC)
## 123060. Completion of total cavopulmonary connection (TCPC) using transcatheter inferior to superior caval vein covered stent
## 123092. Total cavopulmonary connection (TCPC) using intra-extracardiac conduit: fenestrated
## 123093. Total cavopulmonary connection (TCPC) using intra-extracardiac conduit: nonfenestrated
## 127044. Completion of total cavopulmonary connection (TCPC): hepatic veins to pulmonary artery: fenestrated
## 127045. Completion of total cavopulmonary connection (TCPC): hepatic veins to pulmonary artery: nonfenestrated

fuvh_procedure <- c(
  "121000", "121004", "122020", "122021", "122022", "122023", "123001", "123005",
  "123006", "123013", "123027", "123028", "123031", "123032", "123034", "123037",
  "123050", "123051", "123054", "123056", "123060", "123092", "123093", "127044",
  "127045"
)

###################################################################################################
styler:::style_active_file()
